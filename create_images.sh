#!/bin/bash
NONE='\033[00m'
GREEN='\033[01;32m'
RED='\033[01;31m'
BLUE='\033[0;34m'
EXIT_CODE=0

image_creation () {
  docker build -q -f $1 -t $2 .
  exit_code=$?
  [[ $exit_code = 0 ]] && printf "${GREEN}Exit Code: $exit_code${NONE}\n" || printf "${RED}Exit Code: $exit_code${NONE}\n"
  if [[ $exit_code -eq 0 ]]
  then
    printf "${GREEN}Image created successfully${NONE}\n"
  else
    printf "${RED}Image creation failed for $2 !!!${NONE}\n"
    EXIT_CODE=1
  fi
}

printf "${BLUE}Building docker image with name log4j-vulnerability-demo${NONE}\n"
image_creation "Dockerfile" "log4j-vulnerability-demo"

exit $EXIT_CODE
